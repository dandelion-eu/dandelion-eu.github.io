(function(){"use strict";window.docsApp={},window.docsApp.createPrettyUrl=function(t,e){var n,i="&#8203;";return n=t.replace(/\//g,"/"+i),_.each(e,function(t){n=n.replace(t,"<strong>"+t+"</strong>","g")}),n}})(),function(){var t=function(t,e,n){return this.fieldTemplate=_.template('<tr class="<%= index%2==0 ? "" : "color" %>"><td><%= field %></td><td><%= type %></td><td><%= doc %></td><td><%= example %></td></tr>'),this.subfieldTemplate=_.template('<tr class="<%= parent%2==0 ? "" : "color" %> child"><td><%= field %></td><td><%= type %></td><td><%= doc %><% if (links_to) { %> â€” links to <a href="<%= links_to.uri %>"><%= links_to.label %></a><% } %></td><td><%= example %></td></tr>'),this.datagem=t,this.yamlPrefix=n||this.datagem,this.api=e,this};t.prototype.schemaCallback=function(t){var e=this,n=$("#tbody-datagem"),i=this.yamlPrefix+"Docs.yaml";$.get(i).success(function(i){var r=jsyaml.load(i)||{};_.chain(Object.keys(t)).sortBy(function(t){var e=_.indexOf(Object.keys(r),t);return-1!=e?e:9999}).each(function(i,o){var s=t[i];if(n.append(e.fieldTemplate({field:i,type:_.isObject(s)?"Composite":s,doc:i in r?r[i].description:"",example:i in r?r[i].example:"",index:o})),_.isObject(s)){var a=i in r&&"subfields"in r[i]?r[i].subfields:{};_.chain(Object.keys(s)).sortBy(function(t){var e=_.indexOf(Object.keys(a),t);return-1!=e?e:9999}).each(function(t){var r=s[t];n.append(e.subfieldTemplate({field:i+"."+t,type:r,doc:t in a?a[t].description:"",links_to:t in a&&a[t].links_to?a[t].links_to:"",example:t in a?a[t].example:"",parent:o}))})}})})},t.prototype.loadSchema=function(){var t=this,e="http://datamarket.spaziodati.eu/api/v1/datagem/"+this.datagem+"/"+this.api+".json";$.ajax({url:e,dataType:"jsonp"}).success(function(e){t.schemaCallback(e)})},window.docsApp.Datagem=t}();